<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chat.mapper.ChatFriendsMapper">

    <resultMap id="BaseResultMap" type="com.chat.bean.ChatFriends">
        <id column="person_id" jdbcType="VARCHAR" property="userid"/>
        <result column="person_name" jdbcType="VARCHAR" property="nickname"/>
        <result column="image_path" jdbcType="VARCHAR" property="uimg"/>
    </resultMap>

    <resultMap id="UserBaseResultMap" type="com.chat.bean.Userinfo">
        <id column="person_id" jdbcType="INTEGER" property="userid"/>
        <result column="person_name" jdbcType="VARCHAR" property="nickname"/>
        <result column="image_path" jdbcType="VARCHAR" property="uimg"/>
    </resultMap>

    <select id="LookUserAllFriends" resultMap="BaseResultMap" parameterType="java.lang.String">
        select person_id,person_name,image_path from tb_disable_date_person_basic_info where person_id in
                                                                                             (select a.fuser_id from tb_disable_date_chat_friends a where a.user_id=#{userid})
    </select>
    <insert id="InsertUserFriend" parameterType="com.chat.bean.ChatFriends">
        insert into tb_disable_date_chat_friends (userid, fuserid) value (#{userid},#{fuserid})
    </insert>
    <select id="JustTwoUserIsFriend" parameterType="com.chat.bean.ChatFriends" resultType="java.lang.Integer">
        select id from tb_disable_date_chat_friends where user_id=#{userid} and fuser_id=#{fuserid}
    </select>
    <select id="LkUserinfoByUserid" parameterType="java.lang.String" resultMap="UserBaseResultMap">
        select person_id,person_name,image_path from tb_disable_date_person_basic_info where person_id=#{userid}
    </select>


</mapper>